metadata:
    creationTimestamp: null
    labels:
        app: gitea
        managed-by: personal-server
    name: gitea
    namespace: infra
spec:
    replicas: 1
    selector:
        matchLabels:
            app: gitea
    strategy: {}
    template:
        metadata:
            creationTimestamp: null
            labels:
                app: gitea
        spec:
            containers:
                - env:
                    - name: USER_UID
                      value: "1000"
                    - name: USER_GID
                      value: "1000"
                    - name: GITEA__database__DB_TYPE
                      value: postgres
                    - name: GITEA__database__HOST
                      value: postgres:5432
                    - name: GITEA__database__NAME
                      value: gitea
                    - name: GITEA__database__USER
                      value: gitea
                    - name: GITEA__database__PASSWD
                      valueFrom:
                        secretKeyRef:
                            key: GITEA__database__PASSWD
                            name: gitea-secrets
                    - name: GITEA__server__DOMAIN
                      value: gitea.local
                    - name: GITEA__server__SSH_DOMAIN
                      value: gitea.local
                    - name: GITEA__server__ROOT_URL
                      value: https://gitea.example.com
                    - name: GITEA__server__HTTP_PORT
                      value: "3000"
                    - name: GITEA__server__SSH_PORT
                      value: "22"
                    - name: DISABLE_REGISTRATION
                      value: "true"
                  image: gitea/gitea:1.25
                  imagePullPolicy: IfNotPresent
                  livenessProbe:
                    httpGet:
                        path: /
                        port: 3000
                    initialDelaySeconds: 60
                    periodSeconds: 10
                    timeoutSeconds: 5
                  name: gitea
                  ports:
                    - containerPort: 3000
                      name: http
                    - containerPort: 22
                      name: ssh
                  readinessProbe:
                    httpGet:
                        path: /
                        port: 3000
                    initialDelaySeconds: 30
                    periodSeconds: 5
                    timeoutSeconds: 3
                  resources: {}
                  volumeMounts:
                    - mountPath: /data
                      name: gitea-data
                    - mountPath: /etc/gitea
                      name: gitea-config
            volumes:
                - name: gitea-data
                  persistentVolumeClaim:
                    claimName: gitea-data-pvc
                - emptyDir: {}
                  name: gitea-config
status: {}
